<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pathfinding & Maze Lab — A*, Dijkstra, BFS, DFS</title>
  <meta name="description" content="Interactive pathfinding + maze lab using A*, Dijkstra, BFS, DFS with weighted terrain. Vanilla HTML/CSS/JS." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div id="app" data-theme="dark">
  <header>
    <div class="wrap toolbar">
      <div class="brand">
        <svg width="26" height="26" viewBox="0 0 64 64" fill="none" aria-hidden="true">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#7c93ff"/>
              <stop offset="100%" stop-color="#3fd1c9"/>
            </linearGradient>
          </defs>
          <rect x="2" y="2" width="60" height="60" rx="14" stroke="url(#g)" stroke-width="3"/>
          <path d="M18 32h28M32 18v28" stroke="url(#g)" stroke-width="4" stroke-linecap="round"/>
        </svg>
        <div>
          <div>Pathfinding & Maze Lab</div>
          <div class="note" style="font-size:12px;color:var(--muted);">A*, Dijkstra, BFS, DFS • Recursive Division & DFS Mazes • Weights • 4/8-Neighborhood</div>
        </div>
        <span class="badge" aria-hidden="true">Split Files</span>
      </div>
      <div class="controls">
        <div class="seg" role="group" aria-label="Algorithm">
          <button class="alg" data-alg="astar" aria-pressed="true" title="A* (fast, uses heuristic)">A*</button>
          <button class="alg" data-alg="dijkstra" aria-pressed="false" title="Dijkstra (weights, no heuristic)">Dijkstra</button>
          <button class="alg" data-alg="bfs" aria-pressed="false" title="Breadth-First Search">BFS</button>
          <button class="alg" data-alg="dfs" aria-pressed="false" title="Depth-First Search">DFS</button>
        </div>
        <div class="seg" role="group" aria-label="Tool">
          <button class="tool" data-tool="wall" aria-pressed="true" title="Paint walls (W)">Wall</button>
          <button class="tool" data-tool="weight" aria-pressed="false" title="Paint weights (E)">Weight</button>
          <button class="tool" data-tool="erase" aria-pressed="false" title="Erase (R)">Erase</button>
          <button class="tool" data-tool="drag" aria-pressed="false" title="Move start/end (D)">Drag Start/End</button>
        </div>
        <button id="runBtn" class="btn primary">Run</button>
        <button id="stepBtn" class="btn">Step</button>
        <button id="stopBtn" class="btn ghost">Stop</button>
        <button id="clearBtn" class="btn ghost">Clear</button>
      </div>
    </div>

    <!-- Added: About + User Context Bar -->
    <div class="wrap" style="padding:8px 16px 14px; display:grid; gap:10px;">
      <section id="about" class="card" style="padding:12px;">
        <strong>What is this?</strong>
        <p style="margin:8px 0; color:var(--muted)">
          An interactive lab for pathfinding and maze generation. Compare A*, Dijkstra, BFS, and DFS on a grid with walls and weighted terrain.
          <em>Uniqueness:</em> generator‑driven step‑through animations, weighted costs (1–9), 4/8‑neighborhood, zero dependencies.
        </p>
        <p style="margin:8px 0; color:var(--muted)">
          <em>Real‑world analogues:</em> robotics & AGV routing, games AI, maps/logistics routing, evacuation planning.
          <em>How to use:</em> pick an algorithm, draw walls/weights or generate a maze, then press <span class="kbd">Space</span> or click <strong>Run</strong>.
          Use <strong>Step</strong> to advance one expansion at a time. Move start/end with the <strong>Drag</strong> tool.
        </p>
      </section>
      <section id="userMeta" class="card" style="padding:10px; display:flex; gap:14px; align-items:center;">
        <div><strong>Local time:</strong> <span id="userTime">—</span> <span id="userZone" class="note" style="margin-left:6px"></span></div>
        <div><strong>Location:</strong> <span id="userCoords">(requesting…)</span> <span id="geoMsg" class="note" style="margin-left:6px"></span></div>
      </section>
    </div>
  </header>

  <main>
    <section id="gridWrap" class="card active-border">
      <div id="grid" role="grid" tabindex="0" aria-label="Grid"></div>
      <div class="legend">
        <span class="chip"><span class="dot" style="background:var(--cell-start)"></span>Start</span>
        <span class="chip"><span class="dot" style="background:var(--cell-end)"></span>End</span>
        <span class="chip"><span class="dot" style="background:var(--cell-frontier)"></span>Frontier</span>
        <span class="chip"><span class="dot" style="background:var(--cell-visited)"></span>Visited</span>
        <span class="chip"><span class="dot" style="background:var(--cell-path)"></span>Path</span>
        <span class="chip"><span class="dot" style="background:var(--cell-wall)"></span>Wall</span>
        <span class="chip"><span class="dot" style="background:var(--cell-weight)"></span>Weight</span>
      </div>
    </section>

    <aside id="side">
      <div class="card" style="padding: var(--pad);">
        <div class="row"><strong>Run Settings</strong> <span class="pill" id="status">idle</span></div>
        <div class="field"><label for="speed">Animation speed</label><input id="speed" type="range" min="0" max="100" value="40"></div>
        <div class="field"><label for="diag"><input id="diag" type="checkbox"> Allow diagonal movement</label></div>
        <div class="field"><label for="heur">Heuristic</label>
          <select id="heur">
            <option value="manhattan">Manhattan</option>
            <option value="euclid">Euclidean</option>
            <option value="chebyshev">Chebyshev</option>
          </select>
        </div>
        <div class="field"><label for="cols">Grid size</label>
          <div class="kv"><span>Cols × Rows</span>
            <span><input id="cols" type="number" min="10" max="80" value="40" style="width:68px"> × <input id="rows" type="number" min="10" max="60" value="25" style="width:68px"></span>
          </div>
        </div>
        <div class="group">
          <div class="row"><strong>Maze & Terrain</strong><span class="note">Generate walls/weights</span></div>
          <div class="controls" style="justify-content:flex-start">
            <button id="mazeDiv" class="btn">Recursive Division</button>
            <button id="mazeDFS" class="btn">DFS Maze</button>
            <button id="scatter" class="btn">Scatter Walls</button>
            <button id="weights" class="btn">Random Weights</button>
          </div>
        </div>
        <div class="group">
          <div class="row"><strong>Theme & IO</strong><span class="note">Save/Load & display</span></div>
          <div class="controls" style="justify-content:flex-start">
            <button id="themeBtn" class="btn">Toggle Theme</button>
            <button id="exportBtn" class="btn">Export</button>
            <label class="btn" for="importFile" style="cursor:pointer">Import</label>
            <input id="importFile" type="file" accept="application/json" style="display:none">
          </div>
        </div>
        <div class="group">
          <div class="row"><strong>Stats</strong><span class="note">live</span></div>
          <div class="kv"><span>Visited</span><span id="statVisited">0</span></div>
          <div class="kv"><span>Frontier peak</span><span id="statFrontier">0</span></div>
          <div class="kv"><span>Path length</span><span id="statPath">0</span></div>
          <div class="kv"><span>Runtime</span><span id="statRuntime">0 ms</span></div>
        </div>
      </div>

      <div class="card" style="padding: var(--pad);">
        <strong>Shortcuts</strong>
        <ul style="margin:8px 0 0 18px; padding:0; line-height:1.6; color:var(--muted)">
          <li><span class="kbd">Space</span> Run / Stop</li>
          <li><span class="kbd">S</span> Step</li>
          <li><span class="kbd">W</span> Wall • <span class="kbd">E</span> Weight • <span class="kbd">R</span> Erase • <span class="kbd">D</span> Drag</li>
          <li><span class="kbd">1</span> A* • <span class="kbd">2</span> Dijkstra • <span class="kbd">3</span> BFS • <span class="kbd">4</span> DFS</li>
          <li><span class="kbd">Cmd/Ctrl</span> + drag: paint straight line</li>
        </ul>
        <div class="group">
          <strong>Event Log</strong>
          <div id="log" class="log" aria-live="polite"></div>
        </div>
      </div>
    </aside>
  </main>

  <footer>
    <div class="wrap" style="display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 16px;">
      <div>Built with vanilla HTML/CSS/JS. No frameworks. <span aria-hidden="true">⚡️</span></div>
      <div>Tip: hold <span class="kbd">Cmd/Ctrl</span> while dragging to paint straight lines.</div>
    </div>
    <div class="wrap" style="padding:0 16px 12px; color:var(--muted); font-size:12px;">
      <em>Developed by ioazlan01</em>
    </div>
  </footer>
</div>

<div aria-live="polite" aria-atomic="true" class="sr-only" id="ariaLive"></div>

<script src="app.js"></script>
<!-- Lightweight inline script for time + geolocation (kept separate from app logic) -->
<script>
  (function(){
    const timeEl = document.getElementById('userTime');
    const zoneEl = document.getElementById('userZone');
    const crdEl  = document.getElementById('userCoords');
    const msgEl  = document.getElementById('geoMsg');
    try {
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || '';
      zoneEl.textContent = tz ? `(${tz})` : '';
      const fmt = new Intl.DateTimeFormat([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      function tick(){ timeEl.textContent = fmt.format(new Date()); }
      tick(); setInterval(tick, 1000);
    } catch(e) {}

    if (navigator.geolocation){
      navigator.geolocation.getCurrentPosition(function(p){
        const { latitude, longitude } = p.coords;
        crdEl.textContent = `${latitude.toFixed(5)}, ${longitude.toFixed(5)}`;
        msgEl.textContent = '';
      }, function(err){
        msgEl.textContent = err.code === 1 ? '(permission denied)' : '(unavailable)';
      }, { enableHighAccuracy: false, timeout: 6000, maximumAge: 30000 });
    } else {
      msgEl.textContent = '(no geolocation support)';
    }
  })();
</script>
</body>
</html>
